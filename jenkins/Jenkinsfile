pipeline {
agent {
      label 'nodejs8'
  }
stages
  {
  
  stage ('install modules'){
    sh '''
      npm install --verbose -d 
      npm install --save classlist.js
    '''
  }

  stage ('code quality'){
    sh '$(npm bin)/ng lint'
  }
  stage ('build') {
    sh '$(npm bin)/ng build --prod --build-optimizer'
  }
  stage ('build files copy') {
    sh '''
      cp nginx/status.conf dist/nginx-cfg
      oc start-build angular-5-example-rhel --from-dir=dist --follow
    '''
  } 
  
  /*stage('Build Image') {
      steps {
        script {
          openshift.withCluster() {
            openshift.selector("bc", "angular-5-example-rhel").startBuild("--from-dir=dist", "--wait")
          }
        }
      }
    }*/
}
}
}
